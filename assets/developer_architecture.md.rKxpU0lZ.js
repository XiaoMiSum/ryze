import{_ as r,C as E,c as d,o as n,a0 as k,b as t,j as h,w as i,a,G as e,a1 as p}from"./chunks/framework.Cl3KOctt.js";const b=JSON.parse('{"title":"ğŸ—ï¸ Ryze æ¶æ„è®¾è®¡æ–‡æ¡£","description":"","frontmatter":{},"headers":[],"relativePath":"developer/architecture.md","filePath":"developer/architecture.md","lastUpdated":1756736247000}'),g={name:"developer/architecture.md"};function o(y,s,c,A,F,u){const l=E("Mermaid");return n(),d("div",null,[s[4]||(s[4]=k('<h1 id="ğŸ—ï¸-ryze-æ¶æ„è®¾è®¡æ–‡æ¡£" tabindex="-1">ğŸ—ï¸ Ryze æ¶æ„è®¾è®¡æ–‡æ¡£ <a class="header-anchor" href="#ğŸ—ï¸-ryze-æ¶æ„è®¾è®¡æ–‡æ¡£" aria-label="Permalink to &quot;ğŸ—ï¸ Ryze æ¶æ„è®¾è®¡æ–‡æ¡£&quot;">â€‹</a></h1><h2 id="ğŸ“–-æ¦‚è¿°" tabindex="-1">ğŸ“– æ¦‚è¿° <a class="header-anchor" href="#ğŸ“–-æ¦‚è¿°" aria-label="Permalink to &quot;ğŸ“– æ¦‚è¿°&quot;">â€‹</a></h2><p>Ryze æ˜¯ä¸€ä¸ªåŸºäº Java 21 çš„ç°ä»£åŒ–å¤šåè®®æµ‹è¯•æ¡†æ¶ï¼Œé‡‡ç”¨æ¨¡å—åŒ–æ¶æ„è®¾è®¡ï¼Œé€šè¿‡ SPI (Service Provider Interface) æœºåˆ¶å®ç°äº†é«˜åº¦çš„å¯æ‰©å±•æ€§ã€‚æœ¬æ–‡æ¡£è¯¦ç»†æè¿°äº†æ¡†æ¶çš„æ•´ä½“æ¶æ„ã€æ ¸å¿ƒç»„ä»¶ã€è®¾è®¡æ¨¡å¼ä»¥åŠæ‰©å±•æœºåˆ¶ã€‚</p><h2 id="ğŸ¯-è®¾è®¡ç›®æ ‡" tabindex="-1">ğŸ¯ è®¾è®¡ç›®æ ‡ <a class="header-anchor" href="#ğŸ¯-è®¾è®¡ç›®æ ‡" aria-label="Permalink to &quot;ğŸ¯ è®¾è®¡ç›®æ ‡&quot;">â€‹</a></h2><h3 id="æ ¸å¿ƒè®¾è®¡åŸåˆ™" tabindex="-1">æ ¸å¿ƒè®¾è®¡åŸåˆ™ <a class="header-anchor" href="#æ ¸å¿ƒè®¾è®¡åŸåˆ™" aria-label="Permalink to &quot;æ ¸å¿ƒè®¾è®¡åŸåˆ™&quot;">â€‹</a></h3><ol><li><strong>æ¨¡å—åŒ–</strong>: å„åè®®æ¨¡å—ç‹¬ç«‹ï¼Œä¾¿äºç»´æŠ¤å’Œæ‰©å±•</li><li><strong>å¯æ‰©å±•æ€§</strong>: åŸºäº SPI æœºåˆ¶ï¼Œæ”¯æŒè‡ªå®šä¹‰ç»„ä»¶</li><li><strong>ä»£ç ä¸é…ç½®åˆ†ç¦»</strong>: æµ‹è¯•é€»è¾‘ä¸æ•°æ®åˆ†ç¦»ï¼Œæå‡å¯ç»´æŠ¤æ€§</li><li><strong>ç»Ÿä¸€æ¥å£</strong>: æ‰€æœ‰åè®®å…±äº«ç›¸åŒçš„æµ‹è¯•ç»„ä»¶æ¥å£</li><li><strong>é«˜æ€§èƒ½</strong>: ä¼˜åŒ–çš„æ‰§è¡Œå¼•æ“å’Œèµ„æºç®¡ç†</li></ol><h3 id="æŠ€æœ¯é€‰å‹è€ƒè™‘" tabindex="-1">æŠ€æœ¯é€‰å‹è€ƒè™‘ <a class="header-anchor" href="#æŠ€æœ¯é€‰å‹è€ƒè™‘" aria-label="Permalink to &quot;æŠ€æœ¯é€‰å‹è€ƒè™‘&quot;">â€‹</a></h3><ul><li><strong>Java 21</strong>: åˆ©ç”¨æœ€æ–° JVM ç‰¹æ€§å’Œæ€§èƒ½ä¼˜åŒ–</li><li><strong>FastJSON2</strong>: é«˜æ€§èƒ½ JSON å¤„ç†</li><li><strong>FreeMarker</strong>: å¼ºå¤§çš„æ¨¡æ¿å¼•æ“æ”¯æŒ</li><li><strong>SPI æœºåˆ¶</strong>: æ ‡å‡†åŒ–çš„æ‰©å±•æ¥å£</li><li><strong>æ— ä¾èµ–å†²çª</strong>: ç²¾å¿ƒé€‰æ‹©çš„ä¾èµ–åº“ç‰ˆæœ¬</li></ul><h2 id="ğŸ—ï¸-æ•´ä½“æ¶æ„" tabindex="-1">ğŸ—ï¸ æ•´ä½“æ¶æ„ <a class="header-anchor" href="#ğŸ—ï¸-æ•´ä½“æ¶æ„" aria-label="Permalink to &quot;ğŸ—ï¸ æ•´ä½“æ¶æ„&quot;">â€‹</a></h2><h3 id="æ¶æ„å±‚æ¬¡å›¾" tabindex="-1">æ¶æ„å±‚æ¬¡å›¾ <a class="header-anchor" href="#æ¶æ„å±‚æ¬¡å›¾" aria-label="Permalink to &quot;æ¶æ„å±‚æ¬¡å›¾&quot;">â€‹</a></h3>',10)),(n(),t(p,null,{default:i(()=>[e(l,{id:"mermaid-78",class:"mermaid",graph:"graph%20TB%0A%20%20%20%20subgraph%20%22%E7%94%A8%E6%88%B7%E5%B1%82%20User%20Layer%22%0A%20%20%20%20%20%20%20%20A%5BJSON%2FYAML%20%E6%B5%8B%E8%AF%95%E7%94%A8%E4%BE%8B%5D%0A%20%20%20%20%20%20%20%20B%5BMagicBox%20API%5D%0A%20%20%20%20%20%20%20%20C%5BGroovy%20DSL%5D%0A%20%20%20%20end%0A%20%20%20%20%0A%20%20%20%20subgraph%20%22%E6%A1%86%E6%9E%B6%E5%B1%82%20Framework%20Layer%22%0A%20%20%20%20%20%20%20%20D%5BRyze%20Core%5D%0A%20%20%20%20%20%20%20%20E%5BJsonTree%20%E8%A7%A3%E6%9E%90%E5%99%A8%5D%0A%20%20%20%20%20%20%20%20F%5BSessionRunner%20%E6%89%A7%E8%A1%8C%E5%BC%95%E6%93%8E%5D%0A%20%20%20%20end%0A%20%20%20%20%0A%20%20%20%20subgraph%20%22%E7%BB%84%E4%BB%B6%E5%B1%82%20Component%20Layer%22%0A%20%20%20%20%20%20%20%20G%5BTestElement%20%E6%B5%8B%E8%AF%95%E5%85%83%E4%BB%B6%5D%0A%20%20%20%20%20%20%20%20H%5BSampler%20%E5%8F%96%E6%A0%B7%E5%99%A8%5D%0A%20%20%20%20%20%20%20%20I%5BProcessor%20%E5%A4%84%E7%90%86%E5%99%A8%5D%0A%20%20%20%20%20%20%20%20J%5BAssertion%20%E6%96%AD%E8%A8%80%E5%99%A8%5D%0A%20%20%20%20%20%20%20%20K%5BExtractor%20%E6%8F%90%E5%8F%96%E5%99%A8%5D%0A%20%20%20%20end%0A%20%20%20%20%0A%20%20%20%20subgraph%20%22%E5%8D%8F%E8%AE%AE%E5%B1%82%20Protocol%20Layer%22%0A%20%20%20%20%20%20%20%20L%5BHTTP%20Module%5D%0A%20%20%20%20%20%20%20%20M%5BDubbo%20Module%5D%0A%20%20%20%20%20%20%20%20N%5BJDBC%20Module%5D%0A%20%20%20%20%20%20%20%20O%5BRedis%20Module%5D%0A%20%20%20%20%20%20%20%20P%5BMongoDB%20Module%5D%0A%20%20%20%20%20%20%20%20Q%5BKafka%20Module%5D%0A%20%20%20%20%20%20%20%20R%5BRabbitMQ%20Module%5D%0A%20%20%20%20end%0A%20%20%20%20%0A%20%20%20%20subgraph%20%22%E6%89%A9%E5%B1%95%E5%B1%82%20Extension%20Layer%22%0A%20%20%20%20%20%20%20%20S%5BSPI%20%E6%9C%BA%E5%88%B6%5D%0A%20%20%20%20%20%20%20%20T%5B%E8%87%AA%E5%AE%9A%E4%B9%89%E7%BB%84%E4%BB%B6%5D%0A%20%20%20%20%20%20%20%20U%5B%E6%8A%A5%E5%91%8A%E9%9B%86%E6%88%90%5D%0A%20%20%20%20end%0A%20%20%20%20%0A%20%20%20%20A%20--%3E%20D%0A%20%20%20%20B%20--%3E%20D%0A%20%20%20%20C%20--%3E%20D%0A%20%20%20%20D%20--%3E%20E%0A%20%20%20%20D%20--%3E%20F%0A%20%20%20%20F%20--%3E%20G%0A%20%20%20%20G%20--%3E%20H%0A%20%20%20%20G%20--%3E%20I%0A%20%20%20%20G%20--%3E%20J%0A%20%20%20%20G%20--%3E%20K%0A%20%20%20%20H%20--%3E%20L%0A%20%20%20%20H%20--%3E%20M%0A%20%20%20%20H%20--%3E%20N%0A%20%20%20%20H%20--%3E%20O%0A%20%20%20%20H%20--%3E%20P%0A%20%20%20%20H%20--%3E%20Q%0A%20%20%20%20H%20--%3E%20R%0A%20%20%20%20S%20--%3E%20T%0A%20%20%20%20S%20--%3E%20U%0A"})]),fallback:i(()=>[...s[0]||(s[0]=[a(" Loading... ",-1)])]),_:1})),s[5]||(s[5]=h("h3",{id:"æ¨¡å—ä¾èµ–å…³ç³»",tabindex:"-1"},[a("æ¨¡å—ä¾èµ–å…³ç³» "),h("a",{class:"header-anchor",href:"#æ¨¡å—ä¾èµ–å…³ç³»","aria-label":'Permalink to "æ¨¡å—ä¾èµ–å…³ç³»"'},"â€‹")],-1)),(n(),t(p,null,{default:i(()=>[e(l,{id:"mermaid-82",class:"mermaid",graph:"graph%20LR%0A%20%20%20%20subgraph%20%22Core%20Modules%22%0A%20%20%20%20%20%20%20%20A%5Bryze%5D%20--%3E%20B%5Bryze-testng%5D%0A%20%20%20%20end%0A%20%20%20%20%0A%20%20%20%20subgraph%20%22Protocol%20Modules%22%0A%20%20%20%20%20%20%20%20A%20--%3E%20C%5Bryze-dubbo%5D%0A%20%20%20%20%20%20%20%20A%20--%3E%20D%5Bryze-kafka%5D%0A%20%20%20%20%20%20%20%20A%20--%3E%20E%5Bryze-mongo%5D%0A%20%20%20%20%20%20%20%20A%20--%3E%20F%5Bryze-rabbit%5D%0A%20%20%20%20%20%20%20%20A%20--%3E%20G%5Bryze-active%5D%0A%20%20%20%20end%0A%20%20%20%20%0A%20%20%20%20subgraph%20%22Example%20Modules%22%0A%20%20%20%20%20%20%20%20C%20--%3E%20H%5Bdubbo-example%5D%0A%20%20%20%20%20%20%20%20A%20--%3E%20I%5Bhttp-example%5D%0A%20%20%20%20%20%20%20%20A%20--%3E%20J%5Bjdbc-example%5D%0A%20%20%20%20%20%20%20%20D%20--%3E%20K%5Bkafka-example%5D%0A%20%20%20%20%20%20%20%20E%20--%3E%20L%5Bmongo-example%5D%0A%20%20%20%20%20%20%20%20F%20--%3E%20M%5Brabbit-example%5D%0A%20%20%20%20%20%20%20%20G%20--%3E%20N%5Bactive-example%5D%0A%20%20%20%20end%0A"})]),fallback:i(()=>[...s[1]||(s[1]=[a(" Loading... ",-1)])]),_:1})),s[6]||(s[6]=k(`<h2 id="ğŸ”§-æ ¸å¿ƒç»„ä»¶" tabindex="-1">ğŸ”§ æ ¸å¿ƒç»„ä»¶ <a class="header-anchor" href="#ğŸ”§-æ ¸å¿ƒç»„ä»¶" aria-label="Permalink to &quot;ğŸ”§ æ ¸å¿ƒç»„ä»¶&quot;">â€‹</a></h2><h3 id="_1-applicationconfig-é…ç½®ç®¡ç†å™¨" tabindex="-1">1. ApplicationConfig - é…ç½®ç®¡ç†å™¨ <a class="header-anchor" href="#_1-applicationconfig-é…ç½®ç®¡ç†å™¨" aria-label="Permalink to &quot;1. ApplicationConfig - é…ç½®ç®¡ç†å™¨&quot;">â€‹</a></h3><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ApplicationConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // é€šè¿‡ SPI æœºåˆ¶åŠ¨æ€åŠ è½½å„ç§ç»„ä»¶æ˜ å°„</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> static</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Map&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, Class&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> extends</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> TestElement</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;&gt; TEST_ELEMENT_KEY_MAP;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> static</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Map&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, Class&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> extends</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> Assertion</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;&gt; ASSERTION_KEY_MAP;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // ... å…¶ä»–ç»„ä»¶æ˜ å°„</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p><strong>èŒè´£</strong>:</p><ul><li>ç®¡ç†æ‰€æœ‰æµ‹è¯•ç»„ä»¶çš„ç±»å‹æ˜ å°„</li><li>é€šè¿‡ SPI æœºåˆ¶åŠ¨æ€åŠ è½½æ‰©å±•ç»„ä»¶</li><li>æä¾›çº¿ç¨‹å®‰å…¨çš„ç»„ä»¶è®¿é—®</li><li>å®ç°æ‡’åŠ è½½å’Œç¼“å­˜æœºåˆ¶</li></ul><p><strong>è®¾è®¡æ¨¡å¼</strong>: å•ä¾‹æ¨¡å¼ + å»¶è¿ŸåŠ è½½</p><h3 id="_2-sessionrunner-æ‰§è¡Œå¼•æ“" tabindex="-1">2. SessionRunner - æ‰§è¡Œå¼•æ“ <a class="header-anchor" href="#_2-sessionrunner-æ‰§è¡Œå¼•æ“" aria-label="Permalink to &quot;2. SessionRunner - æ‰§è¡Œå¼•æ“&quot;">â€‹</a></h3><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> SessionRunner</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> final</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> SessionContext sessionContext;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> final</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Configure configure;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> List&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Context</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; contextChain;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ContextWrapper context;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p><strong>èŒè´£</strong>:</p><ul><li>ç®¡ç†æµ‹è¯•æ‰§è¡Œçš„ç”Ÿå‘½å‘¨æœŸ</li><li>ç»´æŠ¤æµ‹è¯•ä¸Šä¸‹æ–‡é“¾</li><li>åè°ƒå„ç»„ä»¶çš„æ‰§è¡Œ</li><li>æä¾›å˜é‡å­˜å‚¨å’Œå…±äº«æœºåˆ¶</li></ul><p><strong>è®¾è®¡æ¨¡å¼</strong>: å‘½ä»¤æ¨¡å¼ + è´£ä»»é“¾æ¨¡å¼</p><h3 id="_3-jsontree-é…ç½®è§£æå™¨" tabindex="-1">3. JsonTree - é…ç½®è§£æå™¨ <a class="header-anchor" href="#_3-jsontree-é…ç½®è§£æå™¨" aria-label="Permalink to &quot;3. JsonTree - é…ç½®è§£æå™¨&quot;">â€‹</a></h3><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> JsonTree</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> extends</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> JSONObject</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // å°†åŸå§‹ JSON è½¬æ¢ä¸ºæ ‡å‡†åŒ–çš„æµ‹è¯•é…ç½®</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> JsonTree</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(JSONObject </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">testcase</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        replaceExpiredKeys</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(testcase);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> json </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> prepare</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(testcase);</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        initialize</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(json, </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">isRyzeTestFramework</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(json));</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p><strong>èŒè´£</strong>:</p><ul><li>è§£æå’Œæ ‡å‡†åŒ– JSON/YAML æµ‹è¯•é…ç½®</li><li>å¤„ç†é”®åå¤§å°å†™è½¬æ¢</li><li>æ”¯æŒé…ç½®ç»§æ‰¿å’Œåˆå¹¶</li><li>é€’å½’å¤„ç†åµŒå¥—ç»“æ„</li></ul><p><strong>è®¾è®¡æ¨¡å¼</strong>: å»ºé€ è€…æ¨¡å¼ + é€’å½’æ¨¡å¼</p><h3 id="_4-testelement-æµ‹è¯•å…ƒä»¶åŸºç±»" tabindex="-1">4. TestElement - æµ‹è¯•å…ƒä»¶åŸºç±» <a class="header-anchor" href="#_4-testelement-æµ‹è¯•å…ƒä»¶åŸºç±»" aria-label="Permalink to &quot;4. TestElement - æµ‹è¯•å…ƒä»¶åŸºç±»&quot;">â€‹</a></h3><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> interface</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> TestElement</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">T</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> extends</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> Result</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">extends</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Validatable</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Cloneable</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;TestElement&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">T</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;&gt; {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    default</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> T </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">run</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(SessionRunner </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">session</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    default</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> TestElement&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">T</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">copy</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p><strong>è®¾è®¡ç‰¹ç‚¹</strong>:</p><ul><li>æ‰€æœ‰æµ‹è¯•ç»„ä»¶çš„åŸºç¡€æ¥å£</li><li>æ”¯æŒé…ç½®éªŒè¯å’Œå¯¹è±¡å…‹éš†</li><li>éçº¿ç¨‹å®‰å…¨ï¼Œéœ€è¦å¤åˆ¶åä½¿ç”¨</li><li>æ”¯æŒé…ç½®ç»§æ‰¿å’Œä¸Šä¸‹æ–‡ä¼ é€’</li></ul><h2 id="ğŸ¨-è®¾è®¡æ¨¡å¼åº”ç”¨" tabindex="-1">ğŸ¨ è®¾è®¡æ¨¡å¼åº”ç”¨ <a class="header-anchor" href="#ğŸ¨-è®¾è®¡æ¨¡å¼åº”ç”¨" aria-label="Permalink to &quot;ğŸ¨ è®¾è®¡æ¨¡å¼åº”ç”¨&quot;">â€‹</a></h2><h3 id="_1-ç­–ç•¥æ¨¡å¼-strategy-pattern" tabindex="-1">1. ç­–ç•¥æ¨¡å¼ (Strategy Pattern) <a class="header-anchor" href="#_1-ç­–ç•¥æ¨¡å¼-strategy-pattern" aria-label="Permalink to &quot;1. ç­–ç•¥æ¨¡å¼ (Strategy Pattern)&quot;">â€‹</a></h3><p><strong>åº”ç”¨åœºæ™¯</strong>: ä¸åŒåè®®çš„ Samplerã€Processor å®ç°</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ç»Ÿä¸€æ¥å£</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> interface</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Sampler</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">T</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> extends</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> Result</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">extends</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> TestElement</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">T</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// å…·ä½“ç­–ç•¥å®ç°</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">KW</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;http&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> HTTPSampler</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> implements</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Sampler</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">DefaultSampleResult</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">KW</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;dubbo&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> DubboSampler</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> implements</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Sampler</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">DefaultSampleResult</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p><strong>ä¼˜åŠ¿</strong>:</p><ul><li>è¿è¡Œæ—¶åŠ¨æ€é€‰æ‹©åè®®å®ç°</li><li>æ–°å¢åè®®æ— éœ€ä¿®æ”¹æ ¸å¿ƒä»£ç </li><li>æ¯ä¸ªåè®®ç‹¬ç«‹ç»´æŠ¤å’Œæµ‹è¯•</li></ul><h3 id="_2-å»ºé€ è€…æ¨¡å¼-builder-pattern" tabindex="-1">2. å»ºé€ è€…æ¨¡å¼ (Builder Pattern) <a class="header-anchor" href="#_2-å»ºé€ è€…æ¨¡å¼-builder-pattern" aria-label="Permalink to &quot;2. å»ºé€ è€…æ¨¡å¼ (Builder Pattern)&quot;">â€‹</a></h3><p><strong>åº”ç”¨åœºæ™¯</strong>: æµ‹è¯•ç»„ä»¶çš„æ„å»ºå’Œé…ç½®</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> HTTPSampler</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> static</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Builder</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> extends</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> AbstractSampler.Builder</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;...&gt; {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        public</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Builder </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">method</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(String </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">method</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) { ... }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        public</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Builder </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">url</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(String </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">url</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) { ... }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        public</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Builder </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">header</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(String </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, String </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">value</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) { ... }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        public</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> HTTPSampler </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">build</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() { ... }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p><strong>ä¼˜åŠ¿</strong>:</p><ul><li>æ”¯æŒé“¾å¼è°ƒç”¨ï¼ŒAPI å‹å¥½</li><li>å‚æ•°éªŒè¯å’Œé»˜è®¤å€¼è®¾ç½®</li><li>å¤æ‚å¯¹è±¡çš„åˆ†æ­¥æ„å»º</li></ul><h3 id="_3-æ¨¡æ¿æ–¹æ³•æ¨¡å¼-template-method-pattern" tabindex="-1">3. æ¨¡æ¿æ–¹æ³•æ¨¡å¼ (Template Method Pattern) <a class="header-anchor" href="#_3-æ¨¡æ¿æ–¹æ³•æ¨¡å¼-template-method-pattern" aria-label="Permalink to &quot;3. æ¨¡æ¿æ–¹æ³•æ¨¡å¼ (Template Method Pattern)&quot;">â€‹</a></h3><p><strong>åº”ç”¨åœºæ™¯</strong>: æµ‹è¯•ç»„ä»¶çš„æ‰§è¡Œæµç¨‹</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> abstract</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> AbstractSampler</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">SELF</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">CONFIG</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">RESULT</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> final</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> RESULT </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">run</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(SessionRunner </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">session</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 1. å‡†å¤‡é˜¶æ®µ</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        handleRequest</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(context, result);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 2. æ‰§è¡Œé˜¶æ®µ</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        sample</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(context, result);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 3. å¤„ç†é˜¶æ®µ</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        handleResponse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(context, result);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 4. åå¤„ç†é˜¶æ®µ</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> result;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    protected</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> abstract</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> sample</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(ContextWrapper </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">context</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, RESULT </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">result</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p><strong>ä¼˜åŠ¿</strong>:</p><ul><li>ç»Ÿä¸€çš„æ‰§è¡Œæµç¨‹å’Œç”Ÿå‘½å‘¨æœŸ</li><li>å­ç±»åªéœ€å®ç°ç‰¹å®šæ­¥éª¤</li><li>ä¾¿äºæ·»åŠ é€šç”¨åŠŸèƒ½å’Œæ‹¦æˆªå™¨</li></ul><h3 id="_4-å·¥å‚æ¨¡å¼-factory-pattern" tabindex="-1">4. å·¥å‚æ¨¡å¼ (Factory Pattern) <a class="header-anchor" href="#_4-å·¥å‚æ¨¡å¼-factory-pattern" aria-label="Permalink to &quot;4. å·¥å‚æ¨¡å¼ (Factory Pattern)&quot;">â€‹</a></h3><p><strong>åº”ç”¨åœºæ™¯</strong>: æ ¹æ®é…ç½®åˆ›å»ºæµ‹è¯•ç»„ä»¶</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ComponentFactory</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> static</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> TestElement </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">create</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(String </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, JSONObject </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">config</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        Class&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; clazz </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ApplicationConfig.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getTestElementKeyMap</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(type);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (TestElement) JSON.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">to</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(clazz, config);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p><strong>ä¼˜åŠ¿</strong>:</p><ul><li>éšè—å¯¹è±¡åˆ›å»ºå¤æ‚æ€§</li><li>æ”¯æŒåŸºäºé…ç½®çš„åŠ¨æ€åˆ›å»º</li><li>ä¾¿äºæ‰©å±•æ–°çš„ç»„ä»¶ç±»å‹</li></ul><h3 id="_5-è´£ä»»é“¾æ¨¡å¼-chain-of-responsibility-pattern" tabindex="-1">5. è´£ä»»é“¾æ¨¡å¼ (Chain of Responsibility Pattern) <a class="header-anchor" href="#_5-è´£ä»»é“¾æ¨¡å¼-chain-of-responsibility-pattern" aria-label="Permalink to &quot;5. è´£ä»»é“¾æ¨¡å¼ (Chain of Responsibility Pattern)&quot;">â€‹</a></h3><p><strong>åº”ç”¨åœºæ™¯</strong>: ä¸Šä¸‹æ–‡ç®¡ç†å’Œå˜é‡è§£æ</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ContextWrapper</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> List&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Context</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; contextChain;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Object </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getVariable</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(String </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (Context context </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> contextChain) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            Object value </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> context.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getVariable</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(name);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (value </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> value;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p><strong>ä¼˜åŠ¿</strong>:</p><ul><li>æ”¯æŒå¤šå±‚çº§çš„å˜é‡ç»§æ‰¿</li><li>çµæ´»çš„ä¸Šä¸‹æ–‡ç®¡ç†</li><li>ä¾¿äºæ‰©å±•æ–°çš„ä¸Šä¸‹æ–‡ç±»å‹</li></ul><h3 id="_6-è§‚å¯Ÿè€…æ¨¡å¼-observer-pattern" tabindex="-1">6. è§‚å¯Ÿè€…æ¨¡å¼ (Observer Pattern) <a class="header-anchor" href="#_6-è§‚å¯Ÿè€…æ¨¡å¼-observer-pattern" aria-label="Permalink to &quot;6. è§‚å¯Ÿè€…æ¨¡å¼ (Observer Pattern)&quot;">â€‹</a></h3><p><strong>åº”ç”¨åœºæ™¯</strong>: æµ‹è¯•æŠ¥å‘Šå’Œäº‹ä»¶ç›‘å¬</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> interface</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ReporterListener</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> extends</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> RyzeInterceptor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> beforeTest</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(TestElement </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">element</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> afterTest</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(TestElement </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">element</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, Result </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">result</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Allure é›†æˆ</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> AllureReportListener</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> implements</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ReporterListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // ç›‘å¬æµ‹è¯•äº‹ä»¶ï¼Œç”Ÿæˆ Allure æŠ¥å‘Š</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p><strong>ä¼˜åŠ¿</strong>:</p><ul><li>æ¾è€¦åˆçš„äº‹ä»¶é€šçŸ¥æœºåˆ¶</li><li>æ”¯æŒå¤šç§æŠ¥å‘Šæ ¼å¼</li><li>ä¾¿äºé›†æˆç¬¬ä¸‰æ–¹å·¥å…·</li></ul><h2 id="ğŸ”Œ-æ‰©å±•æœºåˆ¶" tabindex="-1">ğŸ”Œ æ‰©å±•æœºåˆ¶ <a class="header-anchor" href="#ğŸ”Œ-æ‰©å±•æœºåˆ¶" aria-label="Permalink to &quot;ğŸ”Œ æ‰©å±•æœºåˆ¶&quot;">â€‹</a></h2><h3 id="spi-æœåŠ¡å‘ç°" tabindex="-1">SPI æœåŠ¡å‘ç° <a class="header-anchor" href="#spi-æœåŠ¡å‘ç°" aria-label="Permalink to &quot;SPI æœåŠ¡å‘ç°&quot;">â€‹</a></h3><p>Ryze ä½¿ç”¨ Java SPI æœºåˆ¶å®ç°ç»„ä»¶çš„è‡ªåŠ¨å‘ç°å’Œæ³¨å†Œï¼š</p><div class="language-text vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">text</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span></span></span>
<span class="line"><span>META-INF/services/</span></span>
<span class="line"><span>â”œâ”€â”€ io.github.xiaomisum.ryze.testelement.TestElement</span></span>
<span class="line"><span>â”œâ”€â”€ io.github.xiaomisum.ryze.assertion.Rule</span></span>
<span class="line"><span>â”œâ”€â”€ io.github.xiaomisum.ryze.extractor.Extractor</span></span>
<span class="line"><span>â””â”€â”€ io.github.xiaomisum.ryze.testelement.processor.Preprocessor</span></span></code></pre></div><h3 id="è‡ªå®šä¹‰ç»„ä»¶å¼€å‘" tabindex="-1">è‡ªå®šä¹‰ç»„ä»¶å¼€å‘ <a class="header-anchor" href="#è‡ªå®šä¹‰ç»„ä»¶å¼€å‘" aria-label="Permalink to &quot;è‡ªå®šä¹‰ç»„ä»¶å¼€å‘&quot;">â€‹</a></h3><ol><li><strong>å®ç°ç›¸åº”æ¥å£</strong>:</li></ol><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">KW</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;custom_sampler&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> CustomSampler</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> implements</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Sampler</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">DefaultSampleResult</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Override</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> DefaultSampleResult </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">run</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(SessionRunner </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">session</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // è‡ªå®šä¹‰å®ç°é€»è¾‘</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><ol start="2"><li><strong>æ³¨å†Œ SPI æœåŠ¡</strong>:</li></ol><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">#META</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">INF</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">services</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">io.github.xiaomisum.ryze.testelement.TestElement</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">com.example.CustomSampler</span></span></code></pre></div><ol start="3"><li><strong>åœ¨æµ‹è¯•é…ç½®ä¸­ä½¿ç”¨</strong>:</li></ol><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;testclass&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;custom_sampler&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;customParam&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;value&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="åè®®æ¨¡å—å¼€å‘æŒ‡å—" tabindex="-1">åè®®æ¨¡å—å¼€å‘æŒ‡å— <a class="header-anchor" href="#åè®®æ¨¡å—å¼€å‘æŒ‡å—" aria-label="Permalink to &quot;åè®®æ¨¡å—å¼€å‘æŒ‡å—&quot;">â€‹</a></h3><p>å¼€å‘æ–°çš„åè®®æ¨¡å—éœ€è¦å®ç°ä»¥ä¸‹ç»„ä»¶ï¼š</p><ol><li><strong>Sampler å–æ ·å™¨</strong></li><li><strong>Preprocessor å‰ç½®å¤„ç†å™¨</strong></li><li><strong>Postprocessor åç½®å¤„ç†å™¨</strong></li><li><strong>ConfigureItem é…ç½®é¡¹</strong></li><li><strong>Builder æ„å»ºå™¨é›†åˆ</strong></li></ol><p>å‚è€ƒç°æœ‰åè®®æ¨¡å—çš„å®ç°ç»“æ„ã€‚</p><h2 id="ğŸƒ-æ‰§è¡Œæµç¨‹" tabindex="-1">ğŸƒ æ‰§è¡Œæµç¨‹ <a class="header-anchor" href="#ğŸƒ-æ‰§è¡Œæµç¨‹" aria-label="Permalink to &quot;ğŸƒ æ‰§è¡Œæµç¨‹&quot;">â€‹</a></h2><h3 id="æµ‹è¯•æ‰§è¡Œç”Ÿå‘½å‘¨æœŸ" tabindex="-1">æµ‹è¯•æ‰§è¡Œç”Ÿå‘½å‘¨æœŸ <a class="header-anchor" href="#æµ‹è¯•æ‰§è¡Œç”Ÿå‘½å‘¨æœŸ" aria-label="Permalink to &quot;æµ‹è¯•æ‰§è¡Œç”Ÿå‘½å‘¨æœŸ&quot;">â€‹</a></h3>`,68)),(n(),t(p,null,{default:i(()=>[e(l,{id:"mermaid-455",class:"mermaid",graph:"sequenceDiagram%0A%20%20%20%20participant%20U%20as%20User%0A%20%20%20%20participant%20R%20as%20Ryze%0A%20%20%20%20participant%20J%20as%20JsonTree%0A%20%20%20%20participant%20S%20as%20SessionRunner%0A%20%20%20%20participant%20T%20as%20TestElement%0A%20%20%20%20%0A%20%20%20%20U-%3E%3ER%3A%20start(testcase)%0A%20%20%20%20R-%3E%3EJ%3A%20new%20JsonTree(config)%0A%20%20%20%20J-%3E%3EJ%3A%20parse%20and%20normalize%0A%20%20%20%20R-%3E%3ES%3A%20newSession(configure)%0A%20%20%20%20S-%3E%3ES%3A%20initContextChain()%0A%20%20%20%20R-%3E%3ET%3A%20run(session)%0A%20%20%20%20T-%3E%3ET%3A%20handleRequest()%0A%20%20%20%20T-%3E%3ET%3A%20sample()%0A%20%20%20%20T-%3E%3ET%3A%20handleResponse()%0A%20%20%20%20T-%3E%3ET%3A%20processAssertions()%0A%20%20%20%20T-%3E%3ET%3A%20processExtractors()%0A%20%20%20%20T--%3E%3ER%3A%20Result%0A%20%20%20%20R--%3E%3EU%3A%20TestResult%0A"})]),fallback:i(()=>[...s[2]||(s[2]=[a(" Loading... ",-1)])]),_:1})),s[7]||(s[7]=h("h3",{id:"å˜é‡è§£ææµç¨‹",tabindex:"-1"},[a("å˜é‡è§£ææµç¨‹ "),h("a",{class:"header-anchor",href:"#å˜é‡è§£ææµç¨‹","aria-label":'Permalink to "å˜é‡è§£ææµç¨‹"'},"â€‹")],-1)),(n(),t(p,null,{default:i(()=>[e(l,{id:"mermaid-459",class:"mermaid",graph:"graph%20TD%0A%20%20%20%20A%5B%E6%A8%A1%E6%9D%BF%E5%AD%97%E7%AC%A6%E4%B8%B2%20%22%24%7BvarName%7D%22%5D%20--%3E%20B%5BFreeMarker%20%E6%A8%A1%E6%9D%BF%E5%BC%95%E6%93%8E%5D%0A%20%20%20%20B%20--%3E%20C%5B%E4%B8%8A%E4%B8%8B%E6%96%87%E9%93%BE%E6%9F%A5%E6%89%BE%E5%8F%98%E9%87%8F%5D%0A%20%20%20%20C%20--%3E%20D%7B%E5%8F%98%E9%87%8F%E5%AD%98%E5%9C%A8%3F%7D%0A%20%20%20%20D%20--%3E%7C%E6%98%AF%7C%20E%5B%E6%9B%BF%E6%8D%A2%E5%8F%98%E9%87%8F%E5%80%BC%5D%0A%20%20%20%20D%20--%3E%7C%E5%90%A6%7C%20F%5B%E5%87%BD%E6%95%B0%E8%B0%83%E7%94%A8%3F%5D%0A%20%20%20%20F%20--%3E%7C%E6%98%AF%7C%20G%5B%E6%89%A7%E8%A1%8C%E5%87%BD%E6%95%B0%5D%0A%20%20%20%20F%20--%3E%7C%E5%90%A6%7C%20H%5B%E4%BF%9D%E6%8C%81%E5%8E%9F%E6%A0%B7%5D%0A%20%20%20%20E%20--%3E%20I%5B%E8%BF%94%E5%9B%9E%E5%A4%84%E7%90%86%E5%90%8E%E5%AD%97%E7%AC%A6%E4%B8%B2%5D%0A%20%20%20%20G%20--%3E%20I%0A%20%20%20%20H%20--%3E%20I%0A"})]),fallback:i(()=>[...s[3]||(s[3]=[a(" Loading... ",-1)])]),_:1})),s[8]||(s[8]=k(`<h2 id="ğŸ“Š-æ€§èƒ½ä¼˜åŒ–" tabindex="-1">ğŸ“Š æ€§èƒ½ä¼˜åŒ– <a class="header-anchor" href="#ğŸ“Š-æ€§èƒ½ä¼˜åŒ–" aria-label="Permalink to &quot;ğŸ“Š æ€§èƒ½ä¼˜åŒ–&quot;">â€‹</a></h2><h3 id="_1-ç»„ä»¶ç¼“å­˜" tabindex="-1">1. ç»„ä»¶ç¼“å­˜ <a class="header-anchor" href="#_1-ç»„ä»¶ç¼“å­˜" aria-label="Permalink to &quot;1. ç»„ä»¶ç¼“å­˜&quot;">â€‹</a></h3><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ApplicationConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // ä½¿ç”¨ ReadWriteLock ä¿è¯çº¿ç¨‹å®‰å…¨çš„ç¼“å­˜</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> static</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> final</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ReadWriteLock CACHE_LOCK </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ReentrantReadWriteLock</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> static</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Map&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, Class&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;&gt; COMPONENT_CACHE;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="_2-å¯¹è±¡å¤ç”¨" tabindex="-1">2. å¯¹è±¡å¤ç”¨ <a class="header-anchor" href="#_2-å¯¹è±¡å¤ç”¨" aria-label="Permalink to &quot;2. å¯¹è±¡å¤ç”¨&quot;">â€‹</a></h3><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> interface</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Cloneable</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">T</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    T </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">copy</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// åŸºäº Kryo çš„é«˜æ•ˆå¯¹è±¡å¤åˆ¶</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="_3-æ‡’åŠ è½½" tabindex="-1">3. æ‡’åŠ è½½ <a class="header-anchor" href="#_3-æ‡’åŠ è½½" aria-label="Permalink to &quot;3. æ‡’åŠ è½½&quot;">â€‹</a></h3><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> static</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">T</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> T </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getDataMap</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(ReadWriteLock lock, Supplier</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">T</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> getter, Supplier</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">T</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> loader) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // åŒé‡æ£€æŸ¥é”å®šæ¨¡å¼</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="_4-å†…å­˜ç®¡ç†" tabindex="-1">4. å†…å­˜ç®¡ç† <a class="header-anchor" href="#_4-å†…å­˜ç®¡ç†" aria-label="Permalink to &quot;4. å†…å­˜ç®¡ç†&quot;">â€‹</a></h3><ul><li>ä½¿ç”¨ ThreadLocal ç®¡ç†ä¼šè¯çŠ¶æ€</li><li>åŠæ—¶æ¸…ç†æµ‹è¯•ä¸Šä¸‹æ–‡</li><li>åˆç†çš„å¯¹è±¡ç”Ÿå‘½å‘¨æœŸç®¡ç†</li></ul><h2 id="ğŸ”’-çº¿ç¨‹å®‰å…¨" tabindex="-1">ğŸ”’ çº¿ç¨‹å®‰å…¨ <a class="header-anchor" href="#ğŸ”’-çº¿ç¨‹å®‰å…¨" aria-label="Permalink to &quot;ğŸ”’ çº¿ç¨‹å®‰å…¨&quot;">â€‹</a></h2><h3 id="è®¾è®¡åŸåˆ™" tabindex="-1">è®¾è®¡åŸåˆ™ <a class="header-anchor" href="#è®¾è®¡åŸåˆ™" aria-label="Permalink to &quot;è®¾è®¡åŸåˆ™&quot;">â€‹</a></h3><ol><li><strong>ä¼šè¯éš”ç¦»</strong>: æ¯ä¸ªçº¿ç¨‹ä½¿ç”¨ç‹¬ç«‹çš„ SessionRunner</li><li><strong>æ— çŠ¶æ€ç»„ä»¶</strong>: æ ¸å¿ƒç»„ä»¶ä¸ä¿å­˜å¯å˜çŠ¶æ€</li><li><strong>å¯¹è±¡å¤åˆ¶</strong>: TestElement éœ€è¦å¤åˆ¶åä½¿ç”¨</li><li><strong>è¯»å†™é”</strong>: ä¿æŠ¤å…±äº«ç¼“å­˜çš„è®¿é—®</li></ol><h3 id="å¹¶å‘æ”¯æŒ" tabindex="-1">å¹¶å‘æ”¯æŒ <a class="header-anchor" href="#å¹¶å‘æ”¯æŒ" aria-label="Permalink to &quot;å¹¶å‘æ”¯æŒ&quot;">â€‹</a></h3><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> SessionRunner</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> static</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> final</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ThreadLocal&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">SessionRunner</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; HOLDER </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ThreadLocal&lt;&gt;();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> static</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> SessionRunner </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getSessionIfNoneCreateNew</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> session </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> HOLDER.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (session </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            session </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> SessionRunner</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Configure.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">defaultConfigure</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">());</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            HOLDER.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">set</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(session);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> session;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h2 id="ğŸš€-æœªæ¥æ¶æ„æ¼”è¿›" tabindex="-1">ğŸš€ æœªæ¥æ¶æ„æ¼”è¿› <a class="header-anchor" href="#ğŸš€-æœªæ¥æ¶æ„æ¼”è¿›" aria-label="Permalink to &quot;ğŸš€ æœªæ¥æ¶æ„æ¼”è¿›&quot;">â€‹</a></h2><h3 id="è®¡åˆ’ä¸­çš„æ”¹è¿›" tabindex="-1">è®¡åˆ’ä¸­çš„æ”¹è¿› <a class="header-anchor" href="#è®¡åˆ’ä¸­çš„æ”¹è¿›" aria-label="Permalink to &quot;è®¡åˆ’ä¸­çš„æ”¹è¿›&quot;">â€‹</a></h3><ol><li><strong>ååº”å¼ç¼–ç¨‹æ”¯æŒ</strong>: é›†æˆ Reactor æˆ– RxJava</li><li><strong>äº‘åŸç”Ÿæ”¯æŒ</strong>: Kubernetes éƒ¨ç½²å’Œæ‰©å±•</li><li><strong>åˆ†å¸ƒå¼æµ‹è¯•</strong>: æ”¯æŒé›†ç¾¤æ¨¡å¼æµ‹è¯•æ‰§è¡Œ</li><li><strong>æµå¤„ç†åè®®</strong>: æ”¯æŒ WebSocketã€GRPC Stream</li><li><strong>AI è¾…åŠ©æµ‹è¯•</strong>: æ™ºèƒ½æµ‹è¯•ç”Ÿæˆå’Œåˆ†æ</li></ol><h3 id="æ¶æ„æ¼”è¿›åŸåˆ™" tabindex="-1">æ¶æ„æ¼”è¿›åŸåˆ™ <a class="header-anchor" href="#æ¶æ„æ¼”è¿›åŸåˆ™" aria-label="Permalink to &quot;æ¶æ„æ¼”è¿›åŸåˆ™&quot;">â€‹</a></h3><ul><li>ä¿æŒå‘åå…¼å®¹æ€§</li><li>æ¸è¿›å¼æ”¹è¿›ï¼Œé¿å…å¤§çˆ†ç‚¸å¼é‡æ„</li><li>ç¤¾åŒºé©±åŠ¨çš„åŠŸèƒ½å¼€å‘</li><li>æ€§èƒ½å’Œç¨³å®šæ€§ä¼˜å…ˆ</li></ul><hr><p>æœ¬æ¶æ„æ–‡æ¡£å°†éšç€æ¡†æ¶çš„å‘å±•è€ŒæŒç»­æ›´æ–°ã€‚å¦‚æœ‰å»ºè®®æˆ–é—®é¢˜ï¼Œæ¬¢è¿åœ¨ <a href="https://github.com/XiaoMiSum/ryze/issues" target="_blank" rel="noreferrer">Issues</a> ä¸­è®¨è®ºã€‚</p>`,21))])}const B=r(g,[["render",o]]);export{b as __pageData,B as default};
