# ğŸ”— æ‹¦æˆªå™¨ä½¿ç”¨æŒ‡å—

æ‹¦æˆªå™¨æ˜¯ Ryze æ¡†æ¶ä¸­çš„é«˜çº§åŠŸèƒ½ï¼Œå…è®¸æ‚¨åœ¨æµ‹è¯•æ‰§è¡Œçš„ä¸åŒé˜¶æ®µè¿›è¡Œè‡ªå®šä¹‰å¤„ç†ï¼Œå¦‚å‚æ•°åŠ å¯†ã€å“åº”è§£å¯†ã€æ—¥å¿—è®°å½•ç­‰ã€‚

## ğŸ“‹ ç›®å½•

- [åŸºæœ¬æ¦‚å¿µ](#åŸºæœ¬æ¦‚å¿µ)
- [é…ç½®è¯­æ³•](#é…ç½®è¯­æ³•)
- [å†…ç½®æ‹¦æˆªå™¨](#å†…ç½®æ‹¦æˆªå™¨)
- [è‡ªå®šä¹‰æ‹¦æˆªå™¨å¼€å‘](#è‡ªå®šä¹‰æ‹¦æˆªå™¨å¼€å‘)

## ğŸ” åŸºæœ¬æ¦‚å¿µ

### ä½œç”¨èŒƒå›´

æ‹¦æˆªå™¨å¯ä»¥å¯¹ä»¥ä¸‹ç»„ä»¶è¿›è¡Œæ‹¦æˆªï¼š

- **æµ‹è¯•é›†åˆ**ï¼šåœ¨æ•´ä¸ªæµ‹è¯•é›†åˆæ‰§è¡Œå‰åè¿›è¡Œå¤„ç†
- **å–æ ·å™¨**ï¼šåœ¨å•ä¸ªæµ‹è¯•è¯·æ±‚æ‰§è¡Œå‰åè¿›è¡Œå¤„ç†
- **å¤„ç†å™¨**ï¼šåœ¨å‰ç½®/åç½®å¤„ç†å™¨æ‰§è¡Œæ—¶è¿›è¡Œæ‹¦æˆª

### æ‰§è¡Œç”Ÿå‘½å‘¨æœŸ

æ‹¦æˆªå™¨éµå¾ªä»¥ä¸‹æ‰§è¡Œé¡ºåºï¼š

1. **preHandle**ï¼šåœ¨ç›®æ ‡ç»„ä»¶æ‰§è¡Œå‰è°ƒç”¨
2. **ç›®æ ‡ç»„ä»¶æ‰§è¡Œ**
3. **postHandle**ï¼šåœ¨ç›®æ ‡ç»„ä»¶æ‰§è¡Œåè°ƒç”¨
4. **afterCompletion**ï¼šåœ¨æ•´ä¸ªè¯·æ±‚å®Œæˆåè°ƒç”¨ï¼ˆæ— è®ºæˆåŠŸæˆ–å¤±è´¥ï¼‰

## âš™ï¸ é…ç½®è¯­æ³•

### åŸºæœ¬é…ç½®æ ¼å¼

åœ¨æµ‹è¯•é›†åˆæˆ–å–æ ·å™¨ä¸­é€šè¿‡ `interceptors` å­—æ®µé…ç½®æ‹¦æˆªå™¨ï¼š

```yaml
testclass: http  # ç›®æ ‡ç»„ä»¶ç±»å‹
interceptors:
  # æ–¹å¼1ï¼šç®€å•å¼•ç”¨ï¼ˆæ— å‚æ•°ï¼‰
  - 'LogInterceptor'
  
  # æ–¹å¼2ï¼šå¸¦å‚æ•°å¼•ç”¨
  - EncryptInterceptor:
      algorithm: 'AES'
      key: 'mySecretKey'
  
  # æ–¹å¼3ï¼šå®Œæ•´é…ç½®å½¢å¼
  - testclass: 'PerformanceInterceptor'
    timeout_threshold: 5000
    log_slow_requests: true
```

### åº”ç”¨åœºæ™¯ç¤ºä¾‹

#### 1. HTTP è¯·æ±‚æ—¥å¿—è®°å½•

```yaml
testclass: http
interceptors:
  - HttpLogInterceptor:
      log_headers: true
      log_body: true
      mask_sensitive: true
config:
  method: POST
  url: https://api.example.com/users
  headers:
    Authorization: Bearer ${token}
  body:
    username: testuser
    password: secret123
```

#### 2. åŠ¨æ€å‚æ•°åŠ å¯†

```yaml
testclass: http
interceptors:
  - RequestEncryptInterceptor:
      fields: ['password', 'email']
      algorithm: 'md5'
config:
  method: POST
  url: https://api.example.com/register
  body:
    username: newuser
    password: plaintext  # å°†è¢«è‡ªåŠ¨åŠ å¯†
    email: user@example.com  # å°†è¢«è‡ªåŠ¨åŠ å¯†
```

#### 3. å“åº”æ•°æ®è§£å¯†

```yaml
testclass: http
interceptors:
  - ResponseDecryptInterceptor:
      encrypted_fields: ['data.user_info']
      decryption_key: ${decrypt_key}
config:
  method: GET
  url: https://api.example.com/profile
```

#### 4. æ€§èƒ½ç›‘æ§

```yaml
testclass: http
interceptors:
  - PerformanceMonitorInterceptor:
      alert_threshold: 3000  # è¶…è¿‡3ç§’æŠ¥è­¦
      collect_metrics: true
config:
  method: GET
  url: https://api.example.com/heavy-operation
```

## ğŸ› ï¸ å†…ç½®æ‹¦æˆªå™¨

### æ—¥å¿—è®°å½•æ‹¦æˆªå™¨

**åŠŸèƒ½**ï¼šè®°å½•è¯·æ±‚å’Œå“åº”çš„è¯¦ç»†ä¿¡æ¯

```yaml
interceptors:
  - LoggingInterceptor:
      log_level: 'INFO'  # DEBUG, INFO, WARN, ERROR
      include_headers: true
      include_body: false
      max_body_length: 1000
```

### ç¼“å­˜æ‹¦æˆªå™¨

**åŠŸèƒ½**ï¼šç¼“å­˜å“åº”ç»“æœï¼Œæé«˜æµ‹è¯•æ€§èƒ½

```yaml
interceptors:
  - CacheInterceptor:
      cache_key_fields: ['url', 'method']
      cache_duration: 300  # 5åˆ†é’Ÿ
      enable_cache: true
```

### é‡è¯•æ‹¦æˆªå™¨

**åŠŸèƒ½**ï¼šåœ¨è¯·æ±‚å¤±è´¥æ—¶è‡ªåŠ¨é‡è¯•

```yaml
interceptors:
  - RetryInterceptor:
      max_attempts: 3
      retry_delay: 1000  # æ¯«ç§’
      retry_on_status: [500, 502, 503, 504]
```

## ğŸ’¡ æ‰©å±•åŠŸèƒ½

å½“å†…ç½®æ‹¦æˆªå™¨æ— æ³•æ»¡è¶³ç‰¹å®šéœ€æ±‚æ—¶ï¼ŒRyze æ¡†æ¶æ”¯æŒè‡ªå®šä¹‰æ‹¦æˆªå™¨æ‰©å±•ã€‚è¯¦ç»†çš„å¼€å‘æŒ‡å—è¯·å‚è€ƒï¼š

- **å¼€å‘æ–‡æ¡£**ï¼š[Development.md](../Development.md) - å®Œæ•´çš„å¼€å‘æŒ‡å—å’Œæœ€ä½³å®è·µ
- **ä»£ç ç¤ºä¾‹**ï¼šæŸ¥çœ‹æ¡†æ¶æºç ä¸­çš„[å†…ç½®æ‹¦æˆªå™¨å®ç°](../../example/http-example/src/test/resources/META-INF/services/io.github.xiaomisum.ryze.core.interceptor.RyzeInterceptor)

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [å˜é‡ä¸å‡½æ•°](./å˜é‡ä¸å‡½æ•°.md) - äº†è§£åŠ¨æ€æ•°æ®ç”Ÿæˆå’Œå¤„ç†
- [æå–å™¨ä½¿ç”¨](./æå–å™¨.md) - å­¦ä¹ æ•°æ®æå–æŠ€å·§
- [éªŒè¯å™¨é…ç½®](./éªŒè¯å™¨.md) - æŒæ¡ç»“æœéªŒè¯æ–¹æ³•
- [æµ‹è¯•é›†åˆç®¡ç†](./æµ‹è¯•é›†åˆ.md) - ç»„ç»‡å’Œç®¡ç†æµ‹è¯•ç”¨ä¾‹

---

**ğŸ’¡ æç¤º**ï¼šæ‹¦æˆªå™¨æ˜¯å®ç°å¤æ‚æµ‹è¯•é€»è¾‘çš„å¼ºå¤§å·¥å…·ï¼Œåˆç†ä½¿ç”¨å¯ä»¥å¤§å¤§æé«˜æµ‹è¯•çš„çµæ´»æ€§å’Œæ‰©å±•æ€§ï¼