# âš™ï¸ é…ç½®å…ƒä»¶ä½¿ç”¨æŒ‡å—

é…ç½®å…ƒä»¶æ˜¯ Ryze æ¡†æ¶ä¸­ç”¨äºå®šä¹‰å’Œç®¡ç†æµ‹è¯•ç»„ä»¶åŸºç¡€é…ç½®çš„æ ¸å¿ƒç»„ä»¶ï¼Œæä¾›äº†ç»Ÿä¸€çš„é…ç½®ç®¡ç†å’Œå¤ç”¨æœºåˆ¶ã€‚

## ğŸ“‹ ç›®å½•

- [åŸºæœ¬æ¦‚å¿µ](#åŸºæœ¬æ¦‚å¿µ)
- [è®¾è®¡ç†å¿µ](#è®¾è®¡ç†å¿µ)
- [é…ç½®ç»§æ‰¿](#é…ç½®ç»§æ‰¿)
- [å„åè®®é…ç½®å…ƒä»¶](#å„åè®®é…ç½®å…ƒä»¶)
- [ä½¿ç”¨åœºæ™¯](#ä½¿ç”¨åœºæ™¯)
- [æœ€ä½³å®è·µ](#æœ€ä½³å®è·µ)

## ğŸ” åŸºæœ¬æ¦‚å¿µ

### ä½œç”¨åŸç†

é…ç½®å…ƒä»¶ç”¨äºå®šä¹‰æµ‹è¯•ç»„ä»¶çš„åŸºç¡€é…ç½®ï¼Œå½“æµ‹è¯•é›†åˆä¸­åŒ…å«é…ç½®å…ƒä»¶æ—¶ï¼Œå…¶å­çº§æµ‹è¯•ç»„ä»¶ä¼šè‡ªåŠ¨ç»§æ‰¿è¿™äº›é…ç½®ã€‚é…ç½®å…ƒä»¶å¯ä»¥æ˜¾è‘—é™ä½æµ‹è¯•é…ç½®çš„å¤æ‚åº¦ï¼Œæé«˜é…ç½®çš„å¤ç”¨æ€§ã€‚

### é…ç½®ä½ç½®

é…ç½®å…ƒä»¶å¯ä»¥é…ç½®åœ¨ï¼š

- **æµ‹è¯•é›†åˆä¸­**ï¼šä¸ºæ•´ä¸ªæµ‹è¯•é›†åˆåŠå…¶å­çº§æä¾›åŸºç¡€é…ç½®
- **æ¨¡å—çº§é›†åˆ**ï¼šä¸ºç‰¹å®šæ¨¡å—æä¾›é…ç½®
- **é¡¹ç›®çº§é›†åˆ**ï¼šä¸ºæ•´ä¸ªé¡¹ç›®æä¾›å…¨å±€é…ç½®

### é…ç½®ä¼˜å…ˆçº§

å½“å­˜åœ¨å¤šå±‚é…ç½®æ—¶ï¼Œé…ç½®ä¼˜å…ˆçº§éµå¾ªä»¥ä¸‹è§„åˆ™ï¼š

1. **å–æ ·å™¨/å¤„ç†å™¨é…ç½®** > **é…ç½®å…ƒä»¶é…ç½®** > **é»˜è®¤é…ç½®**
2. **å­çº§é…ç½®** > **çˆ¶çº§é…ç½®**
3. **åŒçº§é…ç½®**æŒ‰å£°æ˜é¡ºåºï¼Œåè€…è¦†ç›–å‰è€…

## ğŸ¯ è®¾è®¡ç†å¿µ

### ç»Ÿä¸€é…ç½®ç®¡ç†

é…ç½®å…ƒä»¶çš„è®¾è®¡ç†å¿µæ˜¯å®ç°é…ç½®çš„ç»Ÿä¸€ç®¡ç†å’Œå¤ç”¨ï¼š

- **é™ä½å¤æ‚åº¦**ï¼šé€šè¿‡ç»§æ‰¿æœºåˆ¶å‡å°‘é‡å¤é…ç½®
- **æé«˜ä¸€è‡´æ€§**ï¼šç¡®ä¿ç›¸åŒç±»å‹çš„ç»„ä»¶ä½¿ç”¨ä¸€è‡´çš„åŸºç¡€é…ç½®
- **ä¾¿äºç»´æŠ¤**ï¼šé›†ä¸­ç®¡ç†é…ç½®ï¼Œä¿®æ”¹ä¸€å¤„å½±å“æ‰€æœ‰ç»§æ‰¿ç»„ä»¶
- **çµæ´»è¦†ç›–**ï¼šå…è®¸å­çº§ç»„ä»¶æ ¹æ®éœ€è¦è¦†ç›–çˆ¶çº§é…ç½®

### åè®®æ— å…³æ€§

é…ç½®å…ƒä»¶è®¾è®¡ä¸ºåè®®æ— å…³çš„ç»„ä»¶ï¼Œä¸åŒåè®®çš„é…ç½®å…ƒä»¶å…·æœ‰ç›¸ä¼¼çš„ç»“æ„å’Œä½¿ç”¨æ–¹å¼ï¼š

```yaml
# é€šç”¨é…ç½®å…ƒä»¶ç»“æ„
- testclass: åè®®ç±»å‹
  config:
    # åè®®ç‰¹å®šé…ç½®é¡¹
```

## ğŸ”— é…ç½®ç»§æ‰¿

### ç»§æ‰¿æœºåˆ¶

é…ç½®å…ƒä»¶é€šè¿‡æµ‹è¯•é›†åˆçš„å±‚çº§ç»“æ„å®ç°ç»§æ‰¿ï¼š

```yaml
# é¡¹ç›®çº§é›†åˆ
title: é¡¹ç›®æµ‹è¯•é›†åˆ
configelements:
  - testclass: http
    config:
      protocol: https
      host: api.example.com
      headers:
        User-Agent: RyzeTestFramework

children:
  # æ¨¡å—çº§é›†åˆè‡ªåŠ¨ç»§æ‰¿é¡¹ç›®çº§é…ç½®
  - title: ç”¨æˆ·æ¨¡å—æµ‹è¯•
    configelements:
      # å¯ä»¥æ·»åŠ æˆ–è¦†ç›–é…ç½®
      - testclass: http
        config:
          headers:
            User-Agent: RyzeTestFramework
            X-Module: User
    children:
      # ç”¨ä¾‹çº§é›†åˆç»§æ‰¿æ‰€æœ‰ä¸Šçº§é…ç½®
      - title: ç”¨æˆ·ç™»å½•æµ‹è¯•
        # å–æ ·å™¨å°†ç»§æ‰¿æ‰€æœ‰ä¸Šçº§HTTPé…ç½®
        children:
          - testclass: http
            config:
              # å¯ä»¥è¦†ç›–ç»§æ‰¿çš„é…ç½®
              path: /auth/login
```

### é…ç½®åˆå¹¶

é…ç½®å…ƒä»¶æ”¯æŒé…ç½®åˆå¹¶æœºåˆ¶ï¼š

```yaml
# çˆ¶çº§é…ç½®
configelements:
  - testclass: http
    config:
      headers:
        User-Agent: RyzeTestFramework
        Content-Type: application/json

# å­çº§é…ç½®ï¼ˆåˆå¹¶è€Œéæ›¿æ¢ï¼‰
children:
  - testclass: http
    config:
      headers:
        X-Request-ID: ${uuid()}  # æ–°å¢
        Content-Type: application/xml  # è¦†ç›–
      # æœ€ç»ˆheaders:
      #   User-Agent: RyzeTestFramework
      #   Content-Type: application/xml
      #   X-Request-ID: xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx
```

## ğŸŒ å„åè®®é…ç½®å…ƒä»¶

### ğŸŒ HTTP é…ç½®å…ƒä»¶

ç”¨äºå®šä¹‰ HTTP/HTTPS è¯·æ±‚çš„åŸºç¡€é…ç½®ã€‚

**é…ç½®æ¨¡æ¿**ï¼š[http_defaults.yaml](../template/é…ç½®å…ƒä»¶/http_defaults.yaml)

```yaml
- testclass: http
  config:
    method: GET
    protocol: http
    host: localhost
    port: 8080
    path: /test
    http/2: false
    headers:
      h1: 1
```

**ç›¸å…³æ–‡æ¡£**ï¼š[HTTP åè®®æ–‡æ¡£](../protocols/HTTP.md#é…ç½®å…ƒä»¶)

### ğŸ—„ï¸ JDBC é…ç½®å…ƒä»¶

ç”¨äºå®šä¹‰æ•°æ®åº“è¿æ¥çš„åŸºç¡€é…ç½®ã€‚

**é…ç½®æ¨¡æ¿**ï¼š[jdbc_datasource.yaml](../template/é…ç½®å…ƒä»¶/jdbc_datasource.yaml)

```yaml
- testclass: jdbc
  config:
    driver: com.mysql.cj.jdbc.Driver
    url: jdbc:mysql://localhost:3306/test
    username: root
    password: password
    max_active: 10
```

**ç›¸å…³æ–‡æ¡£**ï¼š[JDBC åè®®æ–‡æ¡£](../protocols/JDBC.md#é…ç½®å…ƒä»¶)

### ğŸ—ƒï¸ Redis é…ç½®å…ƒä»¶

ç”¨äºå®šä¹‰ Redis è¿æ¥çš„åŸºç¡€é…ç½®ã€‚

**é…ç½®æ¨¡æ¿**ï¼š[redis_datasource.yaml](../template/é…ç½®å…ƒä»¶/redis_datasource.yaml)

```yaml
- testclass: redis
  config:
    host: localhost
    port: 6379
    database: 0
    password: password
    timeout: 2000
```

**ç›¸å…³æ–‡æ¡£**ï¼š[Redis åè®®æ–‡æ¡£](../protocols/Redis.md#é…ç½®å…ƒä»¶)

### ğŸ”Œ Dubbo é…ç½®å…ƒä»¶

ç”¨äºå®šä¹‰ Dubbo æœåŠ¡è°ƒç”¨çš„åŸºç¡€é…ç½®ã€‚

**é…ç½®æ¨¡æ¿**ï¼š[dubbo_defaults.yaml](../template/é…ç½®å…ƒä»¶/dubbo_defaults.yaml)

```yaml
- testclass: dubbo
  config:
    application: ryze-test
    registry: zookeeper://127.0.0.1:2181
    protocol: dubbo
    timeout: 5000
```

**ç›¸å…³æ–‡æ¡£**ï¼š[Dubbo åè®®æ–‡æ¡£](../protocols/Dubbo.md#é…ç½®å…ƒä»¶)

### ğŸš€ Kafka é…ç½®å…ƒä»¶

ç”¨äºå®šä¹‰ Kafka æ¶ˆæ¯å‘é€çš„åŸºç¡€é…ç½®ã€‚

**é…ç½®æ¨¡æ¿**ï¼š[kafka_defaults.yaml](../template/é…ç½®å…ƒä»¶/kafka_defaults.yaml)

```yaml
- testclass: kafka
  config:
    bootstrap_servers: localhost:9092
    topic: test-topic
    key_serializer: org.apache.kafka.common.serialization.StringSerializer
    value_serializer: org.apache.kafka.common.serialization.StringSerializer
```

**ç›¸å…³æ–‡æ¡£**ï¼š[Kafka åè®®æ–‡æ¡£](../protocols/Kafka.md#é…ç½®å…ƒä»¶)

### ğŸ° RabbitMQ é…ç½®å…ƒä»¶

ç”¨äºå®šä¹‰ RabbitMQ æ¶ˆæ¯å‘é€çš„åŸºç¡€é…ç½®ã€‚

**é…ç½®æ¨¡æ¿**ï¼š[rabbit_defaults.yaml](../template/é…ç½®å…ƒä»¶/rabbit_defaults.yaml)

```yaml
- testclass: rabbit
  config:
    host: localhost
    port: 5672
    username: guest
    password: guest
    virtual_host: /
    exchange: test-exchange
```

**ç›¸å…³æ–‡æ¡£**ï¼š[RabbitMQ åè®®æ–‡æ¡£](../protocols/RabbitMQ.md#é…ç½®å…ƒä»¶)

### ğŸ¯ ActiveMQ é…ç½®å…ƒä»¶

ç”¨äºå®šä¹‰ ActiveMQ æ¶ˆæ¯å‘é€çš„åŸºç¡€é…ç½®ã€‚

**é…ç½®æ¨¡æ¿**ï¼š[active_defaults.yaml](../template/é…ç½®å…ƒä»¶/active_defaults.yaml)

```yaml
- testclass: active
  config:
    broker_url: tcp://localhost:61616
    username: admin
    password: admin
    queue_name: test-queue
```

**ç›¸å…³æ–‡æ¡£**ï¼š[ActiveMQ åè®®æ–‡æ¡£](../protocols/ActiveMQ.md#é…ç½®å…ƒä»¶)

### ğŸƒ MongoDB é…ç½®å…ƒä»¶

ç”¨äºå®šä¹‰ MongoDB è¿æ¥çš„åŸºç¡€é…ç½®ã€‚

**é…ç½®æ¨¡æ¿**ï¼š[mongo_defaults.yaml](../template/é…ç½®å…ƒä»¶/mongo_defaults.yaml)

```yaml
- testclass: mongo
  config:
    connection_string: mongodb://localhost:27017
    database: test
    collection: test_collection
```

**ç›¸å…³æ–‡æ¡£**ï¼š[MongoDB åè®®æ–‡æ¡£](../protocols/MongoDB.md#é…ç½®å…ƒä»¶)

## ğŸ”§ ä½¿ç”¨åœºæ™¯

### å…¨å±€é…ç½®ç®¡ç†

åœ¨é¡¹ç›®çº§æµ‹è¯•é›†åˆä¸­å®šä¹‰å…¨å±€é…ç½®ï¼š

```yaml
title: ç”µå•†ç³»ç»Ÿæµ‹è¯•é¡¹ç›®
configelements:
  # HTTP å…¨å±€é…ç½®
  - testclass: http
    config:
      protocol: https
      host: api.ecommerce.com
      headers:
        User-Agent: EcommerceTestFramework/1.0
        Accept: application/json
  
  # æ•°æ®åº“å…¨å±€é…ç½®
  - testclass: jdbc
    config:
      driver: com.mysql.cj.jdbc.Driver
      url: jdbc:mysql://db.ecommerce.com:3306/ecommerce_test
      username: ${db_username}
      password: ${db_password}
  
  # ç¼“å­˜å…¨å±€é…ç½®
  - testclass: redis
    config:
      host: cache.ecommerce.com
      port: 6379
      database: 0

children:
  - title: ç”¨æˆ·æœåŠ¡æ¨¡å—
    # ç»§æ‰¿æ‰€æœ‰å…¨å±€é…ç½®
```

### æ¨¡å—ç‰¹å®šé…ç½®

åœ¨æ¨¡å—çº§æµ‹è¯•é›†åˆä¸­å®šä¹‰ç‰¹å®šé…ç½®ï¼š

```yaml
title: è®¢å•æœåŠ¡æ¨¡å—
configelements:
  # è®¢å•æœåŠ¡ç‰¹å®šçš„HTTPé…ç½®
  - testclass: http
    config:
      path: /api/v1/orders
      headers:
        X-Service: OrderService
  
  # è®¢å•æ•°æ®åº“é…ç½®
  - testclass: jdbc
    config:
      url: jdbc:mysql://db.ecommerce.com:3306/order_service

children:
  - title: åˆ›å»ºè®¢å•æµ‹è¯•
    # ç»§æ‰¿æ¨¡å—å’Œé¡¹ç›®çº§é…ç½®
    children:
      - testclass: http
        config:
          method: POST
          # ç»§æ‰¿ path: /api/v1/orders
          # ç»§æ‰¿ headers ä¸­çš„é€šç”¨å’Œæ¨¡å—ç‰¹å®šé…ç½®
          body:
            product_id: 12345
            quantity: 2
```

### ç¯å¢ƒé€‚é…é…ç½®

æ ¹æ®ä¸åŒç¯å¢ƒå®šä¹‰ä¸åŒçš„é…ç½®ï¼š

```yaml
title: ç”¨æˆ·æœåŠ¡æµ‹è¯•
variables:
  # ç¯å¢ƒé…ç½®
  env_config:
    dev:
      api_host: api-dev.example.com
      db_url: jdbc:mysql://db-dev.example.com:3306/user_dev
    test:
      api_host: api-test.example.com
      db_url: jdbc:mysql://db-test.example.com:3306/user_test

configelements:
  # æ ¹æ®ç¯å¢ƒåŠ¨æ€é…ç½®
  - testclass: http
    config:
      host: ${env_config.${environment}.api_host}
  
  - testclass: jdbc
    config:
      url: ${env_config.${environment}.db_url}
      username: ${db_username}
      password: ${db_password}
```

## ğŸ“š æœ€ä½³å®è·µ

### é…ç½®åˆ†å±‚åŸåˆ™

#### é¡¹ç›®çº§é…ç½®

- **å…¨å±€åŸºç¡€é…ç½®**ï¼šAPI åŸºç¡€ URLã€é€šç”¨è¯·æ±‚å¤´
- **å…¬å…±èµ„æºé…ç½®**ï¼šæ•°æ®åº“è¿æ¥æ± ã€ç¼“å­˜è¿æ¥
- **å®‰å…¨é…ç½®**ï¼šè®¤è¯ä¿¡æ¯ã€åŠ å¯†å¯†é’¥

#### æ¨¡å—çº§é…ç½®

- **æ¨¡å—ç‰¹å®šé…ç½®**ï¼šAPI è·¯å¾„å‰ç¼€ã€æ¨¡å—æ ‡è¯†å¤´
- **ä¸šåŠ¡é…ç½®**ï¼šä¸šåŠ¡ç›¸å…³çš„é»˜è®¤å‚æ•°
- **ç¯å¢ƒé€‚é…**ï¼šæ¨¡å—ç‰¹å®šçš„ç¯å¢ƒé…ç½®

#### ç”¨ä¾‹çº§é…ç½®

- **ç”¨ä¾‹ç‰¹å®šé…ç½®**ï¼šå½“å‰ç”¨ä¾‹ç‹¬æœ‰çš„é…ç½®é¡¹
- **åŠ¨æ€é…ç½®**ï¼šåŸºäºå˜é‡ç”Ÿæˆçš„é…ç½®
- **è¦†ç›–é…ç½®**ï¼šä¸´æ—¶è¦†ç›–ä¸Šçº§é…ç½®

### å‘½åè§„èŒƒ

```yaml
configelements:
  # ä½¿ç”¨æ¸…æ™°çš„ testclass åç§°
  - testclass: http
    # é…ç½®é¡¹ä½¿ç”¨æ ‡å‡†å‘½å
    config:
      protocol: https
      host: api.example.com
      port: 443
      # å¸ƒå°”å€¼ä½¿ç”¨æ˜ç¡®çš„ true/false
      http/2: false
      # å¤æ‚é…ç½®ä½¿ç”¨åµŒå¥—ç»“æ„
      headers:
        Content-Type: application/json
        User-Agent: TestFramework/1.0
```

### é…ç½®å¤ç”¨ç­–ç•¥

#### 1. æ¨¡æ¿å¼•ç”¨

```yaml
# å®šä¹‰æ ‡å‡†é…ç½®æ¨¡æ¿
variables:
  standard_http_config: &standard_http_config
    protocol: https
    headers:
      Content-Type: application/json
      User-Agent: StandardTestClient

# å¼•ç”¨æ¨¡æ¿
configelements:
  - testclass: http
    config:
      <<: *standard_http_config
      host: api.example.com
```

#### 2. å˜é‡é…ç½®

```yaml
# é›†ä¸­å®šä¹‰é…ç½®å˜é‡
variables:
  http_config:
    protocol: https
    host: ${api_host}
    port: ${api_port}
    headers:
      User-Agent: ${user_agent}

# åœ¨é…ç½®å…ƒä»¶ä¸­ä½¿ç”¨å˜é‡
configelements:
  - testclass: http
    config: ${http_config}
```

### æ€§èƒ½ä¼˜åŒ–

- **è¿æ¥æ± é…ç½®**ï¼šåˆç†é…ç½®æ•°æ®åº“å’Œæ¶ˆæ¯é˜Ÿåˆ—çš„è¿æ¥æ± å‚æ•°
- **è¶…æ—¶è®¾ç½®**ï¼šæ ¹æ®å®é™…ç½‘ç»œç¯å¢ƒè®¾ç½®åˆé€‚çš„è¶…æ—¶æ—¶é—´
- **ç¼“å­˜åˆ©ç”¨**ï¼šå¯¹äºä¸å˜çš„é…ç½®ï¼Œè€ƒè™‘ä½¿ç”¨ç¼“å­˜æœºåˆ¶
- **æ‡’åŠ è½½**ï¼šä»…åœ¨éœ€è¦æ—¶æ‰åˆå§‹åŒ–é…ç½®å…ƒä»¶

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [æµ‹è¯•é›†åˆç®¡ç†](./æµ‹è¯•é›†åˆ.md) - äº†è§£æµ‹è¯•é›†åˆçš„ç»„ç»‡å’Œç®¡ç†
- [å‰ç½®å¤„ç†å™¨](./å‰ç½®å¤„ç†å™¨.md) - å­¦ä¹ æµ‹è¯•å‰çš„é¢„å¤„ç†æœºåˆ¶
- [åç½®å¤„ç†å™¨](./åç½®å¤„ç†å™¨.md) - æŒæ¡æµ‹è¯•åçš„åå¤„ç†æœºåˆ¶
- [å–æ ·å™¨](./å–æ ·å™¨.md) - äº†è§£å„ç§åè®®çš„å–æ ·å™¨ä½¿ç”¨

### åè®®æ–‡æ¡£

- [HTTP åè®®](../protocols/HTTP.md#é…ç½®å…ƒä»¶) - HTTP é…ç½®å…ƒä»¶è¯¦ç»†è¯´æ˜
- [JDBC åè®®](../protocols/JDBC.md#é…ç½®å…ƒä»¶) - æ•°æ®åº“é…ç½®å…ƒä»¶è¯¦ç»†è¯´æ˜
- [Redis åè®®](../protocols/Redis.md#é…ç½®å…ƒä»¶) - Redis é…ç½®å…ƒä»¶è¯¦ç»†è¯´æ˜
- [Dubbo åè®®](../protocols/Dubbo.md#é…ç½®å…ƒä»¶) - Dubbo é…ç½®å…ƒä»¶è¯¦ç»†è¯´æ˜
- [Kafka åè®®](../protocols/Kafka.md#é…ç½®å…ƒä»¶) - Kafka é…ç½®å…ƒä»¶è¯¦ç»†è¯´æ˜
- [RabbitMQ åè®®](../protocols/RabbitMQ.md#é…ç½®å…ƒä»¶) - RabbitMQ é…ç½®å…ƒä»¶è¯¦ç»†è¯´æ˜
- [ActiveMQ åè®®](../protocols/ActiveMQ.md#é…ç½®å…ƒä»¶) - ActiveMQ é…ç½®å…ƒä»¶è¯¦ç»†è¯´æ˜
- [MongoDB åè®®](../protocols/MongoDB.md#é…ç½®å…ƒä»¶) - MongoDB é…ç½®å…ƒä»¶è¯¦ç»†è¯´æ˜

---

**ğŸ’¡ æç¤º**ï¼šåˆç†ä½¿ç”¨é…ç½®å…ƒä»¶å¯ä»¥æ˜¾è‘—æé«˜æµ‹è¯•é…ç½®çš„å¯ç»´æŠ¤æ€§å’Œå¤ç”¨æ€§ï¼Œå»ºè®®åœ¨é¡¹ç›®åˆæœŸå°±è®¾è®¡å¥½é…ç½®å…ƒä»¶çš„åˆ†å±‚ç»“æ„ï¼