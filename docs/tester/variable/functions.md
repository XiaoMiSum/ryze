# ğŸ”§ å‡½æ•°

æœ¬æ–‡æ¡£è¯¦ç»†ä»‹ç» Ryze æµ‹è¯•æ¡†æ¶ä¸­å†…ç½®å‡½æ•°çš„ä½¿ç”¨æ–¹æ³•ã€‚

## âš¡ å‡½æ•°ä½¿ç”¨

### åŸºæœ¬æ¦‚å¿µ

å½“éœ€è¦åŠ¨æ€ç”Ÿæˆæ•°æ®æ—¶ï¼Œå¯ä»¥ä½¿ç”¨å‡½æ•°åœ¨æµ‹è¯•æ‰§è¡Œè¿‡ç¨‹ä¸­å®æ—¶è®¡ç®—å€¼ã€‚

### è°ƒç”¨è¯­æ³•

**åŸºæœ¬è¯­æ³•**ï¼š`${å‡½æ•°å(å‚æ•°1, å‚æ•°2, ...)}`

**å‘½åå‚æ•°**ï¼š`${å‡½æ•°å(å‚æ•°å=å€¼, å‚æ•°å=å€¼)}`

```yaml
testclass: http
variables:
  # ä½¿ç”¨å‡½æ•°ç”Ÿæˆéšæœºå­—ç¬¦ä¸²
  random_id: ${random_string(10)}
  # ä½¿ç”¨å‘½åå‚æ•°
  timestamp: ${timestamp('yyyy-MM-dd HH:mm:ss')}
config:
  body:
    id: ${random_id}
    created_time: ${timestamp}
    # ç›´æ¥åœ¨é…ç½®ä¸­ä½¿ç”¨å‡½æ•°
    token: ${random_string(32, '0123456789ABCDEF')}
```

### ä½¿ç”¨å»ºè®®

- å‡½æ•°å‚æ•°ä½¿ç”¨å•å¼•å·åŒ…å›´å­—ç¬¦ä¸²å€¼ï¼ˆFreemarker æ¨¡æ¿å¼•æ“è¦æ±‚ï¼‰
- å¤æ‚å‚æ•°å»ºè®®ä½¿ç”¨å‘½åå‚æ•°å½¢å¼ï¼Œæé«˜å¯è¯»æ€§
- å‡½æ•°æ‰§è¡Œé¡ºåºï¼šå…ˆæ‰§è¡Œå‡½æ•°ç”Ÿæˆå˜é‡å€¼ï¼Œå†è¿›è¡Œå˜é‡æ›¿æ¢

## ğŸ“š å†…ç½®å‡½æ•°åˆ—è¡¨

Ryze æä¾›äº†ä¸°å¯Œçš„å†…ç½®å‡½æ•°æ¥æ»¡è¶³å¸¸è§çš„æµ‹è¯•æ•°æ®ç”Ÿæˆéœ€æ±‚ï¼š

### ğŸ” å®‰å…¨åŠ å¯†å‡½æ•°

#### digest

ç”Ÿæˆä¿¡æ¯æ‘˜è¦ï¼Œæ”¯æŒå¤šç§æ•£åˆ—ç®—æ³•ã€‚

**å‚æ•°**ï¼š

| å‚æ•°          | ç±»å‹      | é»˜è®¤å€¼   | è¯´æ˜                      |
|-------------|---------|-------|-------------------------|
| `algorithm` | String  | md5   | ç®—æ³•ç±»å‹ï¼ˆmd5ã€sha1ã€sha256 ç­‰ï¼‰ |
| `content`   | String  | æ—      | å¾…åŠ å¯†çš„åŸå§‹å†…å®¹ï¼ˆå¿…å¡«ï¼‰            |
| `salt`      | String  | æ—      | ç›å€¼ï¼Œç”¨äºå¢å¼ºå®‰å…¨æ€§              |
| `upper`     | Boolean | false | æ˜¯å¦è½¬ä¸ºå¤§å†™                  |

**ä½¿ç”¨ç¤ºä¾‹**ï¼š

```yaml
variables:
  # ç®€å• MD5 åŠ å¯†ï¼ˆå¦‚æœåªä¼ ä¸€ä¸ªå‚æ•°ï¼Œç®—æ³•é»˜è®¤ä¸ºmd5ï¼‰
  simple_md5: ${digest('hello world')}
  # æŒ‡å®šç®—æ³•çš„åŠ å¯†
  sha1_hash: ${digest('md5', 'password')}
  # å¸¦ç›å€¼çš„ SHA256 åŠ å¯†
  secure_hash: ${digest('sha256', 'password', 'mysalt', true)}
```

#### google2fa

ç”Ÿæˆè°·æ­Œèº«ä»½éªŒè¯å™¨çš„åŠ¨æ€éªŒè¯ç ã€‚

**å‚æ•°**ï¼š

| å‚æ•°       | ç±»å‹     | è¯´æ˜           |
|----------|--------|--------------|
| `secret` | String | è°·æ­ŒéªŒè¯å™¨å®‰å…¨ç ï¼ˆå¿…å¡«ï¼‰ |

**ä½¿ç”¨ç¤ºä¾‹**ï¼š

```yaml
variables:
  auth_code: ${google2fa('JBSWY3DPEHPK3PXP')}
```

### ğŸ“Š æ•°æ®ç”Ÿæˆå‡½æ•°

#### random

ç”Ÿæˆéšæœºæ•°ã€‚

**å‚æ•°**ï¼š

| å‚æ•°      | ç±»å‹      | é»˜è®¤å€¼ | è¯´æ˜          |
|---------|---------|-----|-------------|
| `bound` | Integer | æ— é™åˆ¶ | éšæœºæ•°çš„ä¸Šé™ï¼ˆä¸åŒ…å«ï¼‰ |

**ä½¿ç”¨ç¤ºä¾‹**ï¼š

```yaml
variables:
  # 0-99 çš„éšæœºæ•°
  random_num: ${random(100)}
  # ä»»æ„éšæœºæ•°ï¼ˆå¯èƒ½ä¸ºè´Ÿæ•°ï¼‰
  any_random: ${random()}
```

#### random_string

ç”Ÿæˆéšæœºå­—ç¬¦ä¸²ã€‚

**å‚æ•°**ï¼š

| å‚æ•°       | ç±»å‹      | é»˜è®¤å€¼   | è¯´æ˜          |
|----------|---------|-------|-------------|
| `length` | Integer | 10    | éšæœºå­—ç¬¦ä¸²é•¿åº¦     |
| `string` | String  | å­—æ¯    | ç”Ÿæˆéšæœºå­—ç¬¦ä¸²çš„å­—ç¬¦é›† |
| `upper`  | Boolean | false | æ˜¯å¦è½¬ä¸ºå¤§å†™      |

**ä½¿ç”¨ç¤ºä¾‹**ï¼š

```yaml
variables:
  # é»˜è®¤éšæœºå­—ç¬¦ä¸²ï¼ˆé•¿åº¦10çš„å­—æ¯å­—ç¬¦ä¸²ï¼‰
  simple_string: ${random_string()}
  # è‡ªå®šä¹‰é•¿åº¦
  length_string: ${random_string(5)}
  # è‡ªå®šä¹‰é•¿åº¦å’Œå­—ç¬¦é›†
  custom_string: ${random_string(8, '0123456789ABCDEF')}
  # å¤§å†™éšæœºå­—ç¬¦ä¸²
  upper_string: ${random_string(6, '', true)}
```

#### faker

åŸºäºFakeråº“ç”Ÿæˆå„ç§ç±»å‹çš„æ¨¡æ‹Ÿæ•°æ®ã€‚

**å‚æ•°**ï¼š

| å‚æ•°       | ç±»å‹     | é»˜è®¤å€¼   | è¯´æ˜                             |
|----------|--------|-------|--------------------------------|
| `key`    | String | æ—      | æ•°æ®ç±»å‹ï¼Œæ ¼å¼ä¸º"ClassName.Method"ï¼ˆå¿…å¡«ï¼‰ |
| `locale` | String | zh-CN | è¯­è¨€åŒºåŸŸè®¾ç½®                         |

**ä½¿ç”¨ç¤ºä¾‹**ï¼š

```yaml
variables:
  # ç”Ÿæˆä¸­æ–‡å§“å
  chinese_name: ${faker('name.fullName')}
  # ç”Ÿæˆè‹±æ–‡åŸå¸‚å
  english_city: ${faker('address.city', 'en-US')}
  # ç”Ÿæˆæ‰‹æœºå·ç 
  phone_number: ${faker('phoneNumber.cellPhone')}
```

#### uuid

ç”Ÿæˆæ ‡å‡† UUIDã€‚

**å‚æ•°**ï¼šæ— 

**ä½¿ç”¨ç¤ºä¾‹**ï¼š

```yaml
variables:
  unique_id: ${uuid()}
```

### ğŸ•°ï¸ æ—¶é—´æ—¥æœŸå‡½æ•°

#### timestamp

è·å–å½“å‰æ—¶é—´æˆ–æ ¼å¼åŒ–æ—¶é—´ã€‚

**å‚æ•°**ï¼š

| å‚æ•°       | ç±»å‹     | é»˜è®¤å€¼      | è¯´æ˜       |
|----------|--------|----------|----------|
| `format` | String | æ— ï¼ˆè¿”å›æ—¶é—´æˆ³ï¼‰ | æ—¥æœŸæ ¼å¼åŒ–å­—ç¬¦ä¸² |

**ä½¿ç”¨ç¤ºä¾‹**ï¼š

```yaml
variables:
  # æ—¶é—´æˆ³
  current_timestamp: ${timestamp()}
  # æ ¼å¼åŒ–æ—¥æœŸ
  current_date: ${timestamp('yyyy-MM-dd')}
  # å®Œæ•´æ—¥æœŸæ—¶é—´
  full_datetime: ${timestamp('yyyy-MM-dd HH:mm:ss')}
```

#### time_shift

å¯¹æ—¶é—´è¿›è¡Œåç§»æ“ä½œã€‚

**å‚æ•°**ï¼š

| å‚æ•°       | ç±»å‹     | é»˜è®¤å€¼      | è¯´æ˜       |
|----------|--------|----------|----------|
| `format` | String | æ— ï¼ˆè¿”å›æ—¶é—´æˆ³ï¼‰ | æ—¥æœŸæ ¼å¼åŒ–å­—ç¬¦ä¸² |
| `amount` | String | æ— ï¼ˆä¸åç§»ï¼‰   | æ—¶é—´åç§»é‡    |

**åç§»é‡æ ¼å¼è¯´æ˜**ï¼š

- `PT20.345S`ï¼š20.345ç§’
- `PT15M`ï¼š15åˆ†é’Ÿ
- `PT10H`ï¼š10å°æ—¶
- `P2D`ï¼š2å¤©
- `P2DT3H4M`ï¼š2å¤©3å°æ—¶4åˆ†é’Ÿ
- `P-6H3M`ï¼š-6å°æ—¶+3åˆ†é’Ÿ
- `-P6H3M`ï¼š-6å°æ—¶-3åˆ†é’Ÿ

**ä½¿ç”¨ç¤ºä¾‹**ï¼š

```yaml
variables:
  # å½“å‰æ—¶é—´
  now: ${time_shift()}
  # æ˜å¤©çš„æ—¥æœŸ
  tomorrow: ${time_shift('yyyy-MM-dd', 'P1D')}
  # ä¸€å°æ—¶å‰
  hour_ago: ${time_shift('yyyy-MM-dd HH:mm:ss', '-PT1H')}
```

### ğŸ”— æ•°æ®å¤„ç†å‡½æ•°

#### json

å°†ä¼ å…¥çš„å‚æ•°è½¬æ¢ä¸º JSON å¯¹è±¡ã€‚

**å‚æ•°**ï¼šå¤šä¸ª "key=value" æ ¼å¼çš„é”®å€¼å¯¹

**ä½¿ç”¨ç¤ºä¾‹**ï¼š

```yaml
variables:
  user_data: ${json('name=å¼ ä¸‰', 'age=25', 'email=zhangsan@example.com')}
```

#### json_read

é€šè¿‡ JSONPath è¯»å– JSON æ•°æ®ã€‚

**å‚æ•°**ï¼š

| å‚æ•°     | ç±»å‹     | è¯´æ˜               |
|--------|--------|------------------|
| `json` | Object | JSON å¯¹è±¡ï¼ˆå¿…å¡«ï¼‰      |
| `path` | String | JSONPath è¡¨è¾¾å¼ï¼ˆå¿…å¡«ï¼‰ |

**ä½¿ç”¨ç¤ºä¾‹**ï¼š

```yaml
variables:
  user_name: ${json_read(response_data, '$.user.name')}
  user_age: ${json_read(user_data, '$.age')}
```

#### url_encode

å¯¹å­—ç¬¦ä¸²è¿›è¡Œ URL ç¼–ç ã€‚

**å‚æ•°**ï¼š

| å‚æ•°        | ç±»å‹     | è¯´æ˜          |
|-----------|--------|-------------|
| `content` | String | å¾…ç¼–ç çš„å­—ç¬¦ä¸²ï¼ˆå¿…å¡«ï¼‰ |

**ä½¿ç”¨ç¤ºä¾‹**ï¼š

```yaml
variables:
  encoded_param: ${url_encode('æµ‹è¯•å‚æ•° with space')}
```

#### url_decode

å¯¹å­—ç¬¦ä¸²è¿›è¡Œ URL è§£ç ã€‚

**å‚æ•°**ï¼š

| å‚æ•°        | ç±»å‹     | è¯´æ˜          |
|-----------|--------|-------------|
| `content` | String | å¾…è§£ç çš„å­—ç¬¦ä¸²ï¼ˆå¿…å¡«ï¼‰ |

**ä½¿ç”¨ç¤ºä¾‹**ï¼š

```yaml
variables:
  decoded_param: ${url_decode('%E6%B5%8B%E8%AF%95%E5%8F%82%E6%95%B0')}
```

### ğŸ­ æ¨¡æ‹Ÿæ•°æ®å‡½æ•°

#### faker

ä½¿ç”¨ JavaFaker åº“ç”Ÿæˆå„ç§ç±»å‹çš„æ¨¡æ‹Ÿæ•°æ®ã€‚

**å‚æ•°**ï¼š

| å‚æ•°       | ç±»å‹     | é»˜è®¤å€¼   | è¯´æ˜                                |
|----------|--------|-------|-----------------------------------|
| `key`    | String | æ—      | æ•°æ®ç±»å‹ï¼Œæ ¼å¼ä¸º ClassName.MethodNameï¼ˆå¿…å¡«ï¼‰ |
| `locale` | String | zh-CN | æœ¬åœ°åŒ–è®¾ç½®                             |

**å¸¸ç”¨æ•°æ®ç±»å‹**ï¼š

- `name.fullName`ï¼šå®Œæ•´å§“å
- `name.firstName`ï¼šåå­—
- `name.lastName`ï¼šå§“æ°
- `internet.emailAddress`ï¼šé‚®ç®±åœ°å€
- `phoneNumber.cellPhone`ï¼šæ‰‹æœºå·ç 
- `address.fullAddress`ï¼šå®Œæ•´åœ°å€
- `company.name`ï¼šå…¬å¸åç§°
- `lorem.sentence`ï¼šéšæœºå¥å­

**ä½¿ç”¨ç¤ºä¾‹**ï¼š

```yaml
variables:
  # ç”Ÿæˆä¸­æ–‡å§“å
  user_name: ${faker('name.fullName', 'zh-CN')}
  # ç”Ÿæˆé‚®ç®±åœ°å€
  email: ${faker('internet.emailAddress')}
  # ç”Ÿæˆæ‰‹æœºå·ç 
  phone: ${faker('phoneNumber.cellPhone')}
  # ç”Ÿæˆå…¬å¸åç§°
  company: ${faker('company.name')}
```

**è¯¦ç»†å‚è€ƒ**ï¼š[JavaFaker API æ–‡æ¡£](http://dius.github.io/java-faker/apidocs/index.html)

## ğŸ’¡ æ‰©å±•åŠŸèƒ½

å½“å†…ç½®å‡½æ•°æ— æ³•æ»¡è¶³ç‰¹å®šéœ€æ±‚æ—¶ï¼ŒRyze æ¡†æ¶æ”¯æŒè‡ªå®šä¹‰å‡½æ•°æ‰©å±•ã€‚è¯¦ç»†çš„å¼€å‘æŒ‡å—è¯·å‚è€ƒï¼š

- **å¼€å‘æ–‡æ¡£**ï¼š[Development.md](../Development.md) - å®Œæ•´çš„å¼€å‘æŒ‡å—å’Œæœ€ä½³å®è·µ
- **ä»£ç ç¤ºä¾‹**
  ï¼šæŸ¥çœ‹æ¡†æ¶æºç ä¸­çš„[å†…ç½®å‡½æ•°å®ç°](../../ryze/src/main/resources/META-INF/services/io.github.xiaomisum.ryze.function.Function)

**ğŸ’¡ æç¤º**ï¼šå˜é‡å’Œå‡½æ•°æ˜¯ Ryze æ¡†æ¶ä¸­å®ç°åŠ¨æ€æµ‹è¯•çš„æ ¸å¿ƒåŠŸèƒ½ï¼Œåˆç†ä½¿ç”¨å¯ä»¥å¤§å¤§æé«˜æµ‹è¯•çš„çµæ´»æ€§å’Œå¯ç»´æŠ¤æ€§ï¼